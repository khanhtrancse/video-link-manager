<!DOCTYPE html>
<html>

<head>
    <title>
        Home
    </title>
    <% include ../partials/head.ejs %>
</head>

<body>
    <% include ../partials/user-nav.ejs %>

    <div class="container container-background">
        <form method="POST" action="/add-video">
            <div class="col-12 row px-0 mx-0 py-5">
                <div class="col-12 col-md-6 card">
                    <h3 class="text-center">Youtube</h3>
                    <hr class="mb-0" />
                    <div class="card-body">
                        <div class="form-group row justify-content-center align-items-center">
                            <label class="col-3 col-md-2" for="link">Link</label>
                            <div class="col-9 col-md-10">
                                <input id="link" name="link" class="form-control"
                                onchange="showThumbnail()" type="text" placeholder="Video link" required/>
                            </div>
                        </div>
                        <div class="d-flex justify-content-center align-items-center">
                            <img id="video-thumbnail" class="video-thumnbnail" />

                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-6 card">
                    <h3 class="text-center">Info</h3>
                    <hr class="mb-0" />
                    <div class="card-body">
                        <div class="form-group row justify-content-center align-items-center">
                            <label class="col-3  mx-0 px-0" for="subject">Subject</label>
                            <div class="col-9">
                                <input id="subject" name="subject" class="form-control" type="text" placeholder="Subject" required/>
                            </div>
                        </div>
                        <div class="form-group row justify-content-center align-items-center">
                            <label class="col-3  mx-0 px-0" for="type">Type</label>
                            <div class="col-9">
                                <input id="type" name="type" class="form-control" type="text" placeholder="Type" />
                            </div>
                        </div>
                        <div class="form-group row justify-content-center align-items-center">
                            <label class="col-3 mx-0 px-0" for="description">Description</label>
                            <div class="col-9">
                                <textarea id="description" rows="10" name="description" class="form-control" type="text"
                                    placeholder="Description"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="d-flex justify-content-center">
                <input class="btn btn-outline-success" type="submit" value="Submit"/>
            </div>
        </form>

    </div>

</body>

<script>
    function showThumbnail(){
        const link = $('#link').val();
        // console.log('Link',link);
        const param = link.match(/v=[^&]*/g)[0];
        // console.log('param',param);
        const id = (param && param.length > 2)?param.substring(2):'';
        console.log('video id',id);
        const image = `https://img.youtube.com/vi/${id}/hqdefault.jpg`;
        $('#video-thumbnail').attr('src',image);
    }
</script>

</html>